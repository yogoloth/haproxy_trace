# Haproxy Trace

追踪通过haproxy代理的服务的原始ip和端口

~~~
[root@cmspmysql3 ~]# ./haproxy_trace
src=10.224.16.202:61040 fe=mysql be=tcloud_mysql 10.224.16.202:61040 --> 10.224.16.18:3306 --> 10.224.16.94:23672 --> 10.168.119.80:3306
src=10.224.16.202:61142 fe=mysql be=tcloud_mysql 10.224.16.202:61142 --> 10.224.16.18:3306 --> 10.224.16.94:23808 --> 10.168.119.80:3306
src=10.224.16.202:61478 fe=mysql be=tcloud_mysql 10.224.16.202:61478 --> 10.224.16.18:3306 --> 10.224.16.94:24362 --> 10.168.119.80:3306
src=10.224.16.202:61542 fe=mysql be=tcloud_mysql 10.224.16.202:61542 --> 10.224.16.18:3306 --> 10.224.16.94:24478 --> 10.168.119.80:3306
src=10.224.16.202:61656 fe=mysql be=tcloud_mysql 10.224.16.202:61656 --> 10.224.16.18:3306 --> 10.224.16.94:24740 --> 10.168.119.80:3306
src=10.224.16.202:61802 fe=mysql be=tcloud_mysql 10.224.16.202:61802 --> 10.224.16.18:3306 --> 10.224.16.94:24950 --> 10.168.119.80:3306
src=10.224.16.139:12538 fe=mysql be=tcloud_mysql 10.224.16.139:12538 --> 10.224.16.18:3306 --> 10.224.16.94:18748 --> 10.168.119.80:3306
src=10.224.16.139:12578 fe=mysql be=tcloud_mysql 10.224.16.139:12578 --> 10.224.16.18:3306 --> 10.224.16.94:18866 --> 10.168.119.80:3306
src=10.224.16.139:12580 fe=mysql be=tcloud_mysql 10.224.16.139:12580 --> 10.224.16.18:3306 --> 10.224.16.94:18868 --> 10.168.119.80:3306
src=10.224.16.139:12656 fe=mysql be=tcloud_mysql 10.224.16.139:12656 --> 10.224.16.18:3306 --> 10.224.16.94:19086 --> 10.168.119.80:3306
src=10.224.16.138:33198 fe=mysql be=tcloud_mysql 10.224.16.138:33198 --> 10.224.16.18:3306 --> 10.224.16.94:19298 --> 10.168.119.80:3306
src=10.224.16.138:33242 fe=mysql be=tcloud_mysql 10.224.16.138:33242 --> 10.224.16.18:3306 --> 10.224.16.94:19390 --> 10.168.119.80:3306
src=10.224.16.202:9608 fe=mysql be=tcloud_mysql 10.224.16.202:9608 --> 10.224.16.18:3306 --> 10.224.16.94:45536 --> 10.168.119.80:3306
src=10.224.18.88:20746 fe=mysql be=tcloud_mysql 10.224.18.88:20746 --> 10.224.16.18:3306 --> 10.224.16.94:35282 --> 10.168.119.80:3306
src=10.224.18.88:2350 fe=mysql be=tcloud_mysql 10.224.18.88:2350 --> 10.224.16.18:3306 --> 10.224.16.94:7754 --> 10.168.119.80:3306
src=10.224.50.18:22100 fe=mysql be=tcloud_mysql 10.224.50.18:22100 --> 10.224.16.18:3306 --> 10.224.16.94:12570 --> 10.168.119.80:3306
src=10.226.57.146:38646 fe=mysql be=tcloud_mysql 10.226.57.146:38646 --> 10.224.16.18:3306 --> 10.224.16.94:13654 --> 10.168.119.80:3306
src=10.224.44.149:63609 fe=mysql be=tcloud_mysql 10.224.44.149:63609 --> 10.224.16.18:3306 --> 10.224.16.94:24774 --> 10.168.119.80:3306
src=10.224.40.199:63840 fe=mysql be=tcloud_mysql 10.224.40.199:63840 --> 10.224.16.18:3306 --> 10.224.16.94:58546 --> 10.168.119.80:3306
src=10.224.16.202:61042 fe=mysql be=tcloud_mysql 10.224.16.202:61042 --> 10.224.16.18:3306 --> 10.224.16.94:23674 --> 10.168.119.80:3306
src=10.224.16.202:61418 fe=mysql be=tcloud_mysql 10.224.16.202:61418 --> 10.224.16.18:3306 --> 10.224.16.94:24258 --> 10.168.119.80:3306
src=10.224.16.202:61420 fe=mysql be=tcloud_mysql 10.224.16.202:61420 --> 10.224.16.18:3306 --> 10.224.16.94:24260 --> 10.168.119.80:3306
src=10.224.16.202:61422 fe=mysql be=tcloud_mysql 10.224.16.202:61422 --> 10.224.16.18:3306 --> 10.224.16.94:24262 --> 10.168.119.80:3306
src=10.224.16.139:12408 fe=mysql be=tcloud_mysql 10.224.16.139:12408 --> 10.224.16.18:3306 --> 10.224.16.94:18328 --> 10.168.119.80:3306
src=10.224.16.139:12440 fe=mysql be=tcloud_mysql 10.224.16.139:12440 --> 10.224.16.18:3306 --> 10.224.16.94:18412 --> 10.168.119.80:3306
src=10.224.16.138:32970 fe=mysql be=tcloud_mysql 10.224.16.138:32970 --> 10.224.16.18:3306 --> 10.224.16.94:18640 --> 10.168.119.80:3306
src=10.224.16.139:12650 fe=mysql be=tcloud_mysql 10.224.16.139:12650 --> 10.224.16.18:3306 --> 10.224.16.94:19068 --> 10.168.119.80:3306
src=10.224.16.138:33126 fe=mysql be=tcloud_mysql 10.224.16.138:33126 --> 10.224.16.18:3306 --> 10.224.16.94:19070 --> 10.168.119.80:3306
src=10.224.16.138:33200 fe=mysql be=tcloud_mysql 10.224.16.138:33200 --> 10.224.16.18:3306 --> 10.224.16.94:19300 --> 10.168.119.80:3306
src=10.224.16.138:33244 fe=mysql be=tcloud_mysql 10.224.16.138:33244 --> 10.224.16.18:3306 --> 10.224.16.94:19394 --> 10.168.119.80:3306
src=10.224.18.88:20744 fe=mysql be=tcloud_mysql 10.224.18.88:20744 --> 10.224.16.18:3306 --> 10.224.16.94:35276 --> 10.168.119.80:3306
src=10.224.16.138:6256 fe=mysql be=tcloud_mysql 10.224.16.138:6256 --> 10.224.16.18:3306 --> 10.224.16.94:46324 --> 10.168.119.80:3306
src=10.224.16.202:39320 fe=mysql be=tcloud_mysql 10.224.16.202:39320 --> 10.224.16.18:3306 --> 10.224.16.94:10478 --> 10.168.119.80:3306
src=10.226.57.146:38656 fe=mysql be=tcloud_mysql 10.226.57.146:38656 --> 10.224.16.18:3306 --> 10.224.16.94:13676 --> 10.168.119.80:3306
src=10.224.16.202:60316 fe=mysql be=tcloud_mysql 10.224.16.202:60316 --> 10.224.16.18:3306 --> 10.224.16.94:22672 --> 10.168.119.80:3306
src=10.224.16.202:61020 fe=mysql be=tcloud_mysql 10.224.16.202:61020 --> 10.224.16.18:3306 --> 10.224.16.94:23636 --> 10.168.119.80:3306
src=10.224.16.202:61048 fe=mysql be=tcloud_mysql 10.224.16.202:61048 --> 10.224.16.18:3306 --> 10.224.16.94:23680 --> 10.168.119.80:3306
src=10.224.16.202:61136 fe=mysql be=tcloud_mysql 10.224.16.202:61136 --> 10.224.16.18:3306 --> 10.224.16.94:23800 --> 10.168.119.80:3306
src=10.224.16.202:61738 fe=mysql be=tcloud_mysql 10.224.16.202:61738 --> 10.224.16.18:3306 --> 10.224.16.94:24860 --> 10.168.119.80:3306
src=10.224.16.139:12410 fe=mysql be=tcloud_mysql 10.224.16.139:12410 --> 10.224.16.18:3306 --> 10.224.16.94:18326 --> 10.168.119.80:3306
src=10.224.16.139:12442 fe=mysql be=tcloud_mysql 10.224.16.139:12442 --> 10.224.16.18:3306 --> 10.224.16.94:18414 --> 10.168.119.80:3306
src=10.224.16.139:12658 fe=mysql be=tcloud_mysql 10.224.16.139:12658 --> 10.224.16.18:3306 --> 10.224.16.94:19092 --> 10.168.119.80:3306
src=10.224.16.138:33246 fe=mysql be=tcloud_mysql 10.224.16.138:33246 --> 10.224.16.18:3306 --> 10.224.16.94:19398 --> 10.168.119.80:3306
src=10.224.18.88:20922 fe=mysql be=tcloud_mysql 10.224.18.88:20922 --> 10.224.16.18:3306 --> 10.224.16.94:35548 --> 10.168.119.80:3306
src=10.224.16.138:6258 fe=mysql be=tcloud_mysql 10.224.16.138:6258 --> 10.224.16.18:3306 --> 10.224.16.94:46330 --> 10.168.119.80:3306
src=10.224.18.87:10180 fe=mysql be=tcloud_mysql 10.224.18.87:10180 --> 10.224.16.18:3306 --> 10.224.16.94:8446 --> 10.168.119.80:3306
src=10.226.57.147:9594 fe=mysql be=tcloud_mysql 10.226.57.147:9594 --> 10.224.16.18:3306 --> 10.224.16.94:12338 --> 10.168.119.80:3306
src=10.226.57.147:9748 fe=mysql be=tcloud_mysql 10.226.57.147:9748 --> 10.224.16.18:3306 --> 10.224.16.94:13680 --> 10.168.119.80:3306
src=10.224.16.141:59211 fe=mysql be=tcloud_mysql 10.224.16.141:59211 --> 10.224.16.18:3306 --> 10.224.16.94:13808 --> 10.168.119.80:3306
src=10.224.16.202:60718 fe=mysql be=tcloud_mysql 10.224.16.202:60718 --> 10.224.16.18:3306 --> 10.224.16.94:23218 --> 10.168.119.80:3306
src=10.224.16.202:61012 fe=mysql be=tcloud_mysql 10.224.16.202:61012 --> 10.224.16.18:3306 --> 10.224.16.94:23624 --> 10.168.119.80:3306

~~~

